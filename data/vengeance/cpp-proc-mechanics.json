{
  "source": "engine/class_modules/sc_demon_hunter.cpp (auto-extracted)",
  "extractedAt": "2026-02-09T06:41:12.269Z",
  "icds": [
    {
      "icdName": "wounded_quarry_trigger_icd",
      "durationExpression": "1_s",
      "durationSeconds": 1,
      "durationSource": "hardcoded",
      "line": 2873,
      "context": "wounded_quarry_accumulator_t",
      "contextType": "struct"
    },
    {
      "icdName": "relentless_onslaught_icd",
      "durationExpression": "p(",
      "durationSeconds": null,
      "durationSource": "unknown",
      "line": 7392,
      "context": "relentless_onslaught_t",
      "contextType": "struct"
    },
    {
      "icdName": "chaos_strike_refund_icd",
      "durationExpression": "p(",
      "durationSeconds": null,
      "durationSource": "unknown",
      "line": 7456,
      "context": "relentless_onslaught_t",
      "contextType": "struct"
    },
    {
      "icdName": "explosion_of_the_soul_icd",
      "durationExpression": "p(",
      "durationSeconds": null,
      "durationSource": "unknown",
      "line": 8046,
      "context": "fracture_t",
      "contextType": "struct"
    },
    {
      "icdName": "art_of_the_glaive_consumption_icd",
      "durationExpression": "100_ms",
      "durationSeconds": 0.1,
      "durationSource": "hardcoded",
      "line": 9945,
      "context": "create_buffs",
      "contextType": "member_function"
    }
  ],
  "procs": [
    {
      "chanceExpression": "chance",
      "resolvedChance": null,
      "chanceSource": "variable:p()->talent.havoc.chaotic_disposition->effectN( 2 ).percent() / 100",
      "line": 2242,
      "context": "unknown",
      "contextType": "unknown",
      "surroundingHint": "double damage_percent = p()->talent.havoc.chaotic_disposition->effectN( 3 ).percent();"
    },
    {
      "chanceExpression": "chance",
      "resolvedChance": null,
      "chanceSource": "variable:p()->talent.havoc.chaotic_disposition->effectN( 2 ).percent() / 100",
      "line": 2289,
      "context": "unknown",
      "contextType": "unknown",
      "surroundingHint": "double damage_percent = p()->talent.havoc.chaotic_disposition->effectN( 3 ).percent();"
    },
    {
      "chanceExpression": "chance_to_proc",
      "resolvedChance": null,
      "chanceSource": "variable:souls_consumed * 0.0075 * pow( 1.35, p()->buff.seething_anger->up() )",
      "line": 2533,
      "context": "unknown",
      "contextType": "unknown",
      "surroundingHint": "if ( souls_consumed <= 0 || !p()->talent.vengeance.untethered_rage_1->ok() ) | double chance_to_proc = souls_consumed * 0.0075 * pow( 1.35, p()->buff.seething_anger->up() ); | p()->buff.seething_anger->expire();"
    },
    {
      "chanceExpression": "BASE::p(",
      "resolvedChance": null,
      "chanceSource": "expression:BASE::p(",
      "line": 2897,
      "context": "voidfall_building_trigger_t",
      "contextType": "struct",
      "surroundingHint": "if ( !BASE::p()->talent.annihilator.voidfall->ok() ) | if ( !BASE::rng().roll( BASE::p()->talent.annihilator.voidfall->effectN( 3 ).percent() ) ) | if ( BASE::p()->buff.voidfall_spending->up() )"
    },
    {
      "chanceExpression": "chance",
      "resolvedChance": null,
      "chanceSource": "variable:shattered_souls_chance( s )",
      "line": 3322,
      "context": "shattered_souls_trigger_t",
      "contextType": "struct",
      "surroundingHint": "BASE::p()->spawn_soul_fragment( BASE::p()->proc.soul_fragment_from_shattered_souls, soul_fragment::LESSER, 1 );"
    },
    {
      "chanceExpression": "0.60",
      "resolvedChance": 0.6,
      "chanceSource": "hardcoded",
      "line": 4782,
      "context": "immolation_aura_t",
      "contextType": "struct",
      "surroundingHint": "if ( p()->talent.vengeance.fallout->ok() ) | p()->spawn_soul_fragment( p()->proc.soul_fragment_from_fallout, soul_fragment::LESSER, 1 );"
    },
    {
      "chanceExpression": "p(",
      "resolvedChance": null,
      "chanceSource": "expression:p(",
      "line": 6004,
      "context": "soul_immolation_base_t",
      "contextType": "struct",
      "surroundingHint": "if ( p()->talent.scarred.undying_embers->ok() && | rng().roll( p()->talent.scarred.undying_embers->effectN( 2 ).percent() ) )"
    },
    {
      "chanceExpression": "chance",
      "resolvedChance": null,
      "chanceSource": "variable:p()->talent.havoc.screaming_brutality->effectN( 2 ).percent()",
      "line": 7208,
      "context": "unknown",
      "contextType": "unknown",
      "surroundingHint": "if ( p()->talent.havoc.screaming_brutality->ok() ) | double chance = p()->talent.havoc.screaming_brutality->effectN( 2 ).percent();"
    },
    {
      "chanceExpression": "chance",
      "resolvedChance": null,
      "chanceSource": "variable:p()->talent.havoc.screaming_brutality->effectN( 2 ).percent()",
      "line": 7226,
      "context": "unknown",
      "contextType": "unknown",
      "surroundingHint": "if ( p()->talent.havoc.screaming_brutality->ok() && !p()->talent.havoc.first_blood->ok() ) | double chance = p()->talent.havoc.screaming_brutality->effectN( 2 ).percent();"
    },
    {
      "chanceExpression": "p(",
      "resolvedChance": null,
      "chanceSource": "expression:p(",
      "line": 7236,
      "context": "unknown",
      "contextType": "unknown",
      "surroundingHint": "if ( p()->talent.aldrachi_reaver.broken_spirit->ok() && | rng().roll( p()->talent.aldrachi_reaver.broken_spirit->effectN( 4 ).percent() ) ) | p()->spawn_soul_fragment( p()->proc.soul_fragment_from_broken_spirit, soul_fragment::LESSER );"
    },
    {
      "chanceExpression": "this->get_refund_proc_chance(",
      "resolvedChance": null,
      "chanceSource": "expression:this->get_refund_proc_chance(",
      "line": 7452,
      "context": "relentless_onslaught_t",
      "contextType": "struct",
      "surroundingHint": null
    },
    {
      "chanceExpression": "chance",
      "resolvedChance": null,
      "chanceSource": "variable:p()->talent.havoc.relentless_onslaught->effectN( 1 ).percent()",
      "line": 7475,
      "context": "relentless_onslaught_t",
      "contextType": "struct",
      "surroundingHint": "if ( p()->talent.havoc.relentless_onslaught->ok() && result_is_hit( s->result ) && may_refund && | double chance = p()->talent.havoc.relentless_onslaught->effectN( 1 ).percent();"
    },
    {
      "chanceExpression": "p(",
      "resolvedChance": null,
      "chanceSource": "expression:p(",
      "line": 7565,
      "context": "relentless_onslaught_t",
      "contextType": "struct",
      "surroundingHint": "p()->spawn_soul_fragment( p()->proc.soul_fragment_from_demonic_appetite, soul_fragment::LESSER ); | if ( p()->talent.aldrachi_reaver.broken_spirit->ok() && | rng().roll( p()->talent.aldrachi_reaver.broken_spirit->effectN( 4 ).percent() ) )"
    },
    {
      "chanceExpression": "p(",
      "resolvedChance": null,
      "chanceSource": "expression:p(",
      "line": 8042,
      "context": "fracture_t",
      "contextType": "struct",
      "surroundingHint": "p()->buff.warblades_hunger->expire();"
    },
    {
      "chanceExpression": "chance",
      "resolvedChance": null,
      "chanceSource": "variable:p->hero_spec.wounded_quarry_proc_rate",
      "line": 8750,
      "context": "wounded_quarry_t",
      "contextType": "struct",
      "surroundingHint": "p()->spawn_soul_fragment( p()->proc.soul_fragment_from_wounded_quarry, soul_fragment::LESSER );"
    },
    {
      "chanceExpression": "undying_embers_proc_chance",
      "resolvedChance": null,
      "chanceSource": "variable:p->talent.scarred.undying_embers->effectN( 1 ).percent()",
      "line": 8936,
      "context": "immolation_aura_buff_t",
      "contextType": "struct",
      "surroundingHint": "auto functional_buff = new immolation_aura_functional_buff_t( p, fmt::format( \"immolation_aura{}\", i + 1 ) ); | if ( p->talent.scarred.undying_embers->ok() ) | if ( rng().roll( undying_embers_proc_chance ) && p->cooldown.immolation_aura->up() )"
    },
    {
      "chanceExpression": "dh(",
      "resolvedChance": null,
      "chanceSource": "expression:dh(",
      "line": 9506,
      "context": "target_demise",
      "contextType": "member_function",
      "surroundingHint": "if ( dh().rng().roll( dh().options.soul_fragment_from_shattered_souls_chance ) ) | dh().spawn_soul_fragment( dh().proc.soul_fragment_from_death, soul_fragment::GREATER ); | dh().proc.soul_fragment_from_death->occur();"
    },
    {
      "chanceExpression": "options.soul_fragment_movement_consume_chance",
      "resolvedChance": null,
      "chanceSource": "expression:options.soul_fragment_movement_consume_chance",
      "line": 12203,
      "context": "adjust_movement",
      "contextType": "member_function",
      "surroundingHint": "int soul_fragments_to_consume = 0; | for ( auto& it : soul_fragments ) | if ( it->is_type( type ) && it->active() && rng().roll( options.soul_fragment_movement_consume_chance ) )"
    },
    {
      "chanceExpression": "talent.demon_hunter.soul_splitter->effectN( 1",
      "resolvedChance": null,
      "chanceSource": "expression:talent.demon_hunter.soul_splitter->effectN( 1",
      "line": 12443,
      "context": "spawn_soul_fragment",
      "contextType": "member_function",
      "surroundingHint": "sim->print_log( \"{} creates {} {}. active={} total={}\", *this, n, get_soul_fragment_str( type ), | get_active_soul_fragments( type ), get_total_soul_fragments( type ) ); | if ( talent.demon_hunter.soul_splitter->ok() &&"
    }
  ],
  "rppm": [
    {
      "name": "demonic_appetite",
      "line": 1138
    }
  ],
  "accumulators": [
    {
      "functionName": "accumulate_frailty",
      "line": 2481,
      "threshold": null,
      "effect": null,
      "bodySnippet": "{\n    if ( !p()->talent.vengeance.frailty->ok() )\n      return;\n\n    if ( !( ab::harmful && s->result_amount > 0 ) )\n      return;\n\n    const demon_hunter_td_t* target_data = td( s->target );\n    if ( !target_data->debuffs.frailty->up() )\n      return;\n\n    const double multiplier = target_data->deb"
    },
    {
      "functionName": "accumulate_ragefire",
      "line": 4771,
      "threshold": null,
      "effect": "volatile_flameblood_icd",
      "bodySnippet": "{\n      demon_hunter_spell_t::impact( s );\n\n      if ( result_is_hit( s->result ) )\n      {\n        bool spawn_fallout_soul = false;\n        if ( p()->talent.vengeance.fallout->ok() )\n        {\n          spawn_fallout_soul = s->n_targets == 1 || rng().roll( 0.60 );\n        }\n\n        if ( initial &&"
    }
  ],
  "optionDefaults": [
    {
      "optionName": "soul_fragment_movement_consume_chance",
      "variable": "options.soul_fragment_movement_consume_chance",
      "defaultValue": "0, 1",
      "line": 10214
    },
    {
      "optionName": "wounded_quarry_chance_vengeance",
      "variable": "options.wounded_quarry_chance_vengeance",
      "defaultValue": "0, 1",
      "line": 10215
    },
    {
      "optionName": "wounded_quarry_chance_havoc",
      "variable": "options.wounded_quarry_chance_havoc",
      "defaultValue": "0, 1",
      "line": 10216
    }
  ],
  "constants": [
    {
      "name": "MAX_SOUL_FRAGMENTS",
      "expression": "6",
      "numericValue": 6,
      "line": 87
    },
    {
      "name": "DEVOURER_MAX_SOUL_FRAGMENTS",
      "expression": "10",
      "numericValue": 10,
      "line": 88
    },
    {
      "name": "soul_fragment_movement_consume_chance",
      "expression": "0.85",
      "numericValue": 0.85,
      "line": 1213
    },
    {
      "name": "wounded_quarry_chance_vengeance",
      "expression": "0.30",
      "numericValue": 0.3,
      "line": 1215
    },
    {
      "name": "wounded_quarry_chance_havoc",
      "expression": "0.10",
      "numericValue": 0.1,
      "line": 1217
    },
    {
      "name": "soul_fragment_from_shattered_souls_chance",
      "expression": "0.4",
      "numericValue": 0.4,
      "line": 1221
    }
  ],
  "stats": {
    "icdDeclarations": 6,
    "icdUsages": 5,
    "procRolls": 19,
    "rppmDeclarations": 1,
    "accumulators": 2,
    "optionDefaults": 3,
    "constants": 6
  }
}